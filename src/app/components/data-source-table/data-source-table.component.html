<div>
    <div class="header">
        <mat-form-field class="search">
            <input matInput #filter placeholder="{{ 'Filter' | translate }}">
        </mat-form-field>
        <mat-paginator #paginator [pageIndex]="0" [pageSize]="10"></mat-paginator>
    </div>

    <mat-table #table [dataSource]="dataSource" matSort [ngClass]="{'selectable':selectable}">
        <ng-container *ngFor="let header of headers">
            <ng-container matColumnDef="{{header.key}}">
                <mat-header-cell *matHeaderCellDef translate mat-sort-header>{{ header.name }}</mat-header-cell>
                <mat-cell *matCellDef="let row" style="position:relative;">


                    <ng-container [ngSwitch]="header.type">
                        <ng-container *ngSwitchCase="'frequency'">
                            <div class="select-placeholder">{{ row[header.key] || row[header.key] === 0 ? '' : header.name }}</div>
                            <mat-select name="{{header.key}}" name="header.key" [(ngModel)]="row[header.key]">
                                <mat-option *ngFor="let option of frequencies" [value]="option.value">
                                    {{ option.name | translate }}
                                </mat-option>
                            </mat-select>
                        </ng-container>
                        <ng-container *ngSwitchDefault>
                            <flat-field name="{{header.name}}" [(ngModel)]="row[header.key]" [type]="header.type" (change)="onChange(row)"></flat-field>
                        </ng-container>
                    </ng-container>
                    <!--[placeholder]="row[header.key] ? 'yea' : 'no' "-->
                    <!-- Todo: besseres input feld? -->

                    <!--
                    <mat-form-field>
                        <mat-select placeholder="Favorite food">
                            <mat-option *ngFor="let option of options" [value]="option.value">
                                {{ option.name }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                -->
                </mat-cell>
            </ng-container>
        </ng-container>

        <ng-container matColumnDef="" *ngIf="selectable">
            <mat-header-cell *matHeaderCellDef class="checkbox-row">
                <mat-checkbox class="checkbox" [(ngModel)]="checked" (change)="check($event)" [indeterminate]="indeterminate"></mat-checkbox>
            </mat-header-cell>
            <mat-cell *matCellDef="let row" class="checkbox-row">
                <mat-checkbox class="checkbox" (change)="setIndeterminate()" [(ngModel)]="row.checked"></mat-checkbox>
            </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="cols"></mat-header-row>
        <mat-row *matRowDef="let row; columns: cols;" (click)="onSelected(row)"></mat-row>
    </mat-table>
</div>